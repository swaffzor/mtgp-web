(this["webpackJsonpmtgp-web"]=this["webpackJsonpmtgp-web"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r,c,a,o,i,s,u,d,l=n(1),b=n.n(l),j=n(14),m=n.n(j),v=(n(24),n(25),n(5)),f=n(3),p=n.n(f),h=n(4),O=n(2);!function(e){e[e.White=0]="White",e[e.Blue=1]="Blue",e[e.Black=2]="Black",e[e.Red=3]="Red",e[e.Green=4]="Green"}(r||(r={})),function(e){e[e.W=0]="W",e[e.U=1]="U",e[e.B=2]="B",e[e.R=3]="R",e[e.G=4]="G"}(c||(c={})),function(e){e[e["Basic Land"]=0]="Basic Land",e[e.Common=1]="Common",e[e.Uncommon=2]="Uncommon",e[e["Mythic Rare"]=3]="Mythic Rare",e[e.Timeshifted=4]="Timeshifted",e[e.Masterpiece=5]="Masterpiece"}(a||(a={})),function(e){e[e.normal=0]="normal",e[e.split=1]="split",e[e.flip=2]="flip",e[e["double-faced"]=3]="double-faced",e[e.token=4]="token",e[e.plane=5]="plane",e[e.scheme=6]="scheme",e[e.phenomenon=7]="phenomenon",e[e.leveler=8]="leveler",e[e.vanguard=9]="vanguard"}(o||(o={})),function(e){e[e.Legal=0]="Legal",e[e.Banned=1]="Banned",e[e.Restricted=2]="Restricted"}(i||(i={})),function(e){e.name="name",e.manaCost="manaCost",e.cmc="cmc",e.drawProbability="drawProbability",e.quantity="quantity",e.type="type",e.power="power"}(s||(s={})),function(e){e[e.core=0]="core",e[e.expansion=1]="expansion",e[e.reprint=2]="reprint",e[e.box=3]="box",e[e.un=4]="un",e[e["from the vault"]=5]="from the vault",e[e["premium deck"]=6]="premium deck",e[e["duel deck"]=7]="duel deck",e[e.starter=8]="starter",e[e.commander=9]="commander",e[e.planechase=10]="planechase",e[e.archenemy=11]="archenemy",e[e.promo=12]="promo",e[e.vanguard=13]="vanguard",e[e.masters=14]="masters"}(u||(u={})),function(e){e[e.marketing=0]="marketing",e[e.land=1]="land",e[e.common=2]="common",e[e.uncommon=3]="uncommon",e[e.rare=4]="rare",e[e["mythic rare"]=5]="mythic rare"}(d||(d={}));var x=n(0),g="h-44",y=function(e){var t=e.cardProps,n=e.onClick,r=Object(l.useState)(""),c=Object(O.a)(r,2),a=c[0],o=c[1],i=Object(l.useState)(!!t.imageUrl),s=Object(O.a)(i,2),u=s[0],d=s[1];return Object(l.useEffect)((function(){var e,n;o("".concat(null!==(e=null===(n=t.drawProbability)||void 0===n?void 0:n.toFixed(1))&&void 0!==e?e:""," %"))}),[null===t||void 0===t?void 0:t.drawProbability,null===t||void 0===t?void 0:t.quantity]),Object(x.jsx)("div",{className:["relative","m-1 w-32",n&&"cursor-pointer"].join(" "),onClick:function(){return n&&n()},children:Object(x.jsxs)("div",{className:"my-6",children:[u?Object(x.jsx)("img",{src:null===t||void 0===t?void 0:t.imageUrl,alt:"card art",onError:function(){return d(!1)},className:"".concat((null===t||void 0===t?void 0:t.isSaved)?"":"border-2 border-red-400 rounded-lg border-dashed")}):Object(x.jsxs)("div",{className:"relative ".concat(g," ").concat((null===t||void 0===t?void 0:t.isSaved)?!u&&"border-2 rounded-lg":"border-2 border-red-400 rounded-lg border-dashed"),children:["imageless"===t.type&&"No Data Available",Object(x.jsx)("div",{className:"absolute bottom-0 right-1",children:(null===t||void 0===t?void 0:t.power)&&"".concat(null===t||void 0===t?void 0:t.power,"/").concat(null===t||void 0===t?void 0:t.toughness)})]}),Object(x.jsx)("div",{className:"relative",children:Object(x.jsx)("div",{className:"absolute text-red-600 bg-green-200 h-8 bottom-28 left-12 px-2 rounded-lg",children:a})}),Object(x.jsxs)("div",{className:"text-xs",children:[null===t||void 0===t?void 0:t.name," ",t.quantity&&"(".concat(t.quantity,")")]})]})})},k=function(e){var t,n=e.cardProps,r=e.onClick;return Object(x.jsx)("div",{className:["relative","m-1",r&&"cursor-pointer"].join(" "),onClick:function(){return r&&r()},children:Object(x.jsx)("div",{className:"my-2 border-2 border-blue-800 rounded-lg p-2",children:Object(x.jsxs)("div",{className:"flex items-center relative text-xs justify-start h-12",children:[Object(x.jsx)("div",{className:"absolute top-0",children:n.quantity}),Object(x.jsx)("div",{className:"absolute bottom-0",children:"".concat(null===(t=n.drawProbability)||void 0===t?void 0:t.toFixed(1),"%")}),Object(x.jsx)("div",{className:"ml-12",children:n.name})]})})})},C=function(e){var t=e.type,n=e.value,r=e.placeholder,c=e.classOverrides,a=e.inputRef,o=e.onChange,i=e.onKeyPress,s=e.onBlur,u=e.onFocus;return Object(x.jsx)("div",{className:"relative h-10",children:Object(x.jsx)("input",{type:t,value:n,className:c,placeholder:r,onChange:function(e){return o&&o(e)},onKeyPress:function(e){return i&&i(e)},onFocus:function(e){return u&&u(e)},onBlur:function(e){return s&&s(e)},ref:a})})},w=function(e){var t=e.id,n=e.cards,r=e.title,c=e.button,a=e.onCardClick,o=Object(l.useState)(""),i=Object(O.a)(o,2),u=i[0],d=i[1],b=Object(l.useState)(!1),j=Object(O.a)(b,2),m=j[0],v=j[1],f=Object(l.useState)("list"),p=Object(O.a)(f,2),h=p[0],g=p[1],w=Object(l.useState)(s.name),N=Object(O.a)(w,2),S=N[0],q=N[1],P=Object(l.useState)(""),B=Object(O.a)(P,2),R=B[0],E=B[1],F=Object(l.useRef)(null);Object(l.useEffect)((function(){var e;null===(e=F.current)||void 0===e||e.focus()}),[]);var D="image"===h?function(e){var n=e.card,r=e.index;return Object(x.jsx)(y,{cardProps:n,onClick:function(){return a&&a(n)}},"".concat(t,"-").concat(n.name,"-").concat(r))}:function(e){var n=e.card,r=e.index;return Object(x.jsx)(k,{cardProps:n,onClick:function(){return a&&a(n)}},"".concat(t,"-").concat(n.name,"-").concat(r))},L=["justify-items-center","flex-col grid grid-flow-row gap-x-0","grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","xl:grid-cols-7","2xl:grid-cols-".concat(10," grid-rows-").concat(n.length/10)].join(" ");return Object(x.jsxs)("div",{className:"mx-1 mt-10 border-2 border-black rounded-md relative",children:[Object(x.jsx)("div",{className:"",children:r}),Object(x.jsxs)("div",{className:"border-b-2 border-black flex items-center justify-center",children:[Object(x.jsxs)("div",{className:"m-2",children:["Lock Search",Object(x.jsx)(C,{type:"checkbox",onChange:function(){return v(!m)},classOverrides:"m-2"})]}),Object(x.jsx)(C,{type:"text",placeholder:"Search Deck",onChange:function(e){return d(e.target.value)},classOverrides:"px-2 border border-2 border-gray-600 rounded-lg",onBlur:function(){var e;console.log("ref"),m&&(null===(e=F.current)||void 0===e||e.focus())},inputRef:F}),Object.keys(s).map((function(e){return Object(x.jsx)("div",{className:"m-2 cursor-pointer ".concat(S===e&&"border-b-2 border-gray-600"),onClick:function(){var t="";switch(R){case"":case"DESC":t="ASC";break;case"ASC":t="DESC"}q((function(n){return E(n!==S?R:t),e}))},children:"".concat(e)},e)})),Object(x.jsxs)("div",{children:["Display Cards",Object(x.jsx)(C,{type:"checkbox",onChange:function(){g("image"===h?"list":"image")}})]})]}),Object(x.jsx)("div",{className:"image"===h?L:"grid grid-cols-6 gap-x-0",children:n.sort((function(e,t){var n,r,c="DESC"===R?-1:1;return(null!==(n=e[S])&&void 0!==n?n:0)>(null!==(r=t[S])&&void 0!==r?r:0)?1*c:-1*c})).filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})).map((function(e,t){return Object(x.jsx)(D,{card:e,index:t},"".concat(r,"-").concat(t))}))}),(null===c||void 0===c?void 0:c.text)&&Object(x.jsx)("div",{className:"border-t-2 border-black",children:Object(x.jsx)("button",{onClick:function(){return c.onClick&&c.onClick()},children:c.text})})]})},N=n(7),S=n(17),q=n(15),P=n(11),B=n(16),R=n(18),E=n(19),F=function(e){Object(B.a)(n,e);var t=Object(R.a)(n);function n(e,r,c){var a;return Object(q.a)(this,n),(a=t.call(this)).statusCode=void 0,a.key=void 0,a.cardProps=void 0,a.message=r,a.name="Fetch Error",a.statusCode=e,a.cardProps=c,Object.setPrototypeOf(Object(P.a)(a),n.prototype),a}return n}(Object(E.a)(Error)),D=function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L(t),e.next=3,fetch("".concat("https://api.magicthegathering.io/v1","/cards").concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:if(!((c=e.sent.cards).length<1)){e.next=9;break}throw new F(404,"Card Not Found",t);case 9:return e.abrupt("return",c.map((function(e){return Object(N.a)(Object(N.a)({},e),{},{quantity:Number(t.quantity)})})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=Object.entries(e).map((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return r?"".concat(n,"=").concat(r):""})).filter((function(e){return!e.includes("quantity")}));return t.length>0?"?".concat(t.join("&")):""},I=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({name:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){var n,r=RegExp("");switch(e){case"name":r=/ [A-Za-z-,' ]+ /g;break;case"quantity":r=/[0-9]+ /g}return null===(n=t.match(r))||void 0===n?void 0:n.join("").trim()},M=function(e){var t=e.map((function(e){return e.quantity})).reduce((function(e,t){return(null!==e&&void 0!==e?e:0)+(null!==t&&void 0!==t?t:0)}),0);return e.map((function(n){return n.drawProbability=(null===n||void 0===n?void 0:n.quantity)&&(null===n||void 0===n?void 0:n.quantity)/(null!==t&&void 0!==t?t:e.length)*100,n}))},T=function(e){var t=e.setDeck,n=e.setNotFound,r=Object(l.useState)(!0),c=Object(O.a)(r,2),a=c[0],o=c[1],i=Object(l.useState)(""),s=Object(O.a)(i,2),u=s[0],d=s[1],b=Object(l.useState)(!1),j=Object(O.a)(b,2),m=j[0],f=j[1],g=Object(l.useState)([]),y=Object(O.a)(g,2),k=y[0],w=y[1];Object(l.useEffect)((function(){n(k)}),[k]);var N=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}o(!a),e.next=12;break;case 4:return f(!0),e.t0=t,e.next=8,P();case 8:e.t1=e.sent,(0,e.t0)(e.t1),o(!a),f(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q={},P=function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.split("\n"),n=t.map((function(e){var t,n,r={name:A("name",e),set:null===(t=e.match(/\([A-Za-z]+[0-9]*\)/g))||void 0===t||null===(n=t.join("").trim().match(/[A-Za-z0-9]+/g))||void 0===n?void 0:n.join("").trim(),quantity:A("quantity",e)};return r.name||r.quantity?D(r).then((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.find((function(e){return void 0!==e.imageUrl})))&&void 0!==t?t:e.length>0?e[e.findIndex((function(e){return e.name}))]:q})).catch((function(e){var t,n,c,a;404===e.statusCode&&w([].concat(Object(v.a)(k),[null!==(t="".concat(null===(n=e.cardProps)||void 0===n?void 0:n.quantity," ").concat(null===(c=e.cardProps)||void 0===c?void 0:c.name," (").concat(null===(a=e.cardProps)||void 0===a?void 0:a.set,")"))&&void 0!==t?t:"unknown card import error"]));var o={name:r.name,quantity:r.quantity,type:"imageless"};return new Promise((function(e,t){return e(o)}))})):q})),e.next=4,Promise.all(n);case 4:return r=e.sent.filter((function(e){return e!==q})),M(r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"relative m-1",children:[Object(x.jsxs)("div",{className:"w-32 left-0 ".concat(a&&"hidden"),children:[Object(x.jsx)(C,{type:"text",placeholder:"Deck Name",classOverrides:"border rounded-lg px-1 w-32 left-0"}),Object(x.jsx)(S.a,{className:"border rounded-lg px-1 left-0 w-80",minRows:6,onChange:function(e){d(e.target.value)}}),Object(x.jsx)("br",{})]}),Object(x.jsx)("div",{className:"border rounded-lg px-4 w-32",children:Object(x.jsx)("button",{className:"".concat(m&&"text-gray-400"),onClick:N,disabled:m,children:m?"Loading...":"Import Deck"})})]})},U=function(e){var t=e.text;e.url;return Object(x.jsx)("div",{children:Object(x.jsx)("button",{children:t})})},G=function(){return Object(x.jsx)("div",{className:"border border-b-2 border-blue-400 m-2",children:Object(x.jsx)(U,{text:"Home",url:""})})},J=function(){var e=Object(l.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(l.useState)([]),a=Object(O.a)(c,2),o=a[0],i=a[1],s=Object(l.useState)([]),u=Object(O.a)(s,2),d=u[0],b=u[1],j=Object(l.useState)([]),m=Object(O.a)(j,2),f=m[0],g=m[1],y=Object(l.useState)([]),k=Object(O.a)(y,2),N=k[0],S=k[1];Object(l.useEffect)((function(){var e=localStorage.getItem("my-deck");e&&b(JSON.parse(e))}),[]);var q=function(){var e=Object(h.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enter"!==t.key.toLowerCase()){e.next=5;break}return e.next=3,I(n);case 3:r=e.sent,i(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Magic Stats Gathering"}),Object(x.jsx)(G,{}),Object(x.jsx)(T,{setDeck:b,setNotFound:function(e){return S([].concat(Object(v.a)(N),Object(v.a)(e)))}}),Object(x.jsx)(C,{placeholder:"search",type:"text",classOverrides:"absolute left-1 w-1/4 border rounded-md my-2 pl-1",onChange:function(e){r(e.target.value)},onKeyPress:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),n&&Object(x.jsx)(w,{id:"search-results",title:"Search Results",cards:o,shelfType:"image",onCardClick:function(e){return b([].concat(Object(v.a)(d),[e]))}}),N.length>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Not Found"}),N.map((function(e){return Object(x.jsx)("div",{children:e},"notfound-".concat(e))}))]}),Object(x.jsx)(w,{id:"hand",title:"In Hand",cards:f,shelfType:"image",onCardClick:function(e){return function(e,t,n){var r=Object(v.a)(t),c=r.findIndex((function(t){return t.name===e.name}));r.splice(c,1),n(r)}(e,f,g)}}),Object(x.jsx)(w,{id:"my-deck",title:"My Deck",cards:d,shelfType:"image",button:{text:"Save",onClick:function(){d.forEach((function(e){return e.isSaved=!0})),localStorage.setItem("my-deck",JSON.stringify(d))}},onCardClick:function(e){var t;e.quantity=(null===e||void 0===e?void 0:e.quantity)&&(null===e||void 0===e?void 0:e.quantity)-1,M(d),(null!==(t=e.quantity)&&void 0!==t?t:0)>0?b(d):b(Object(v.a)(d).filter((function(t){return t.name!==e.name}))),g([].concat(Object(v.a)(f),[e]))}})]})};var W=function(){return Object(x.jsx)("div",{className:"App m-4",children:Object(x.jsx)(J,{})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};m.a.render(Object(x.jsx)(b.a.StrictMode,{children:Object(x.jsx)(W,{})}),document.getElementById("root")),z()}},[[28,1,2]]]);
//# sourceMappingURL=main.b78715e4.chunk.js.map